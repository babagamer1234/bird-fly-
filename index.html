<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bird Game</title>

<!-- GOOGLE ADSENSE SCRIPT (once at top) -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6255468902751815"
     crossorigin="anonymous"></script>

<style>
    body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-image: url('https://i.ibb.co/0yXMTCBD/Screenshot-2025-12-01-202101.png');
        background-size: cover;
        background-position: center;
        font-family: sans-serif;
        user-select: none;
    }
    #gameCanvas {
        display: block;
        margin: 0 auto;
        background: transparent;
    }
    #restartBtn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 14px 30px;
        font-size: 28px;
        display: none;
        cursor: pointer;
        background: rgba(255,255,255,0.9);
        border: none;
        border-radius: 12px;
        z-index: 10;
    }
    .adBox {
        width: 100%;
        text-align: center;
        margin: 10px 0;
    }
</style>
</head>
<body>

<!-- 1st Ad -->
<div class="adBox">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-6255468902751815"
         data-ad-slot="9223202134"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

<!-- AUDIO -->
<audio id="bgSong" src="https://files.catbox.moe/30yynd.mp3" loop></audio>
<audio id="gameOverSong" src="https://files.catbox.moe/wiujni.mp3"></audio>

<!-- CANVAS -->
<canvas id="gameCanvas" width="800" height="600"></canvas>
<button id="restartBtn">Restart</button>

<!-- 2nd Ad -->
<div class="adBox">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-6255468902751815"
         data-ad-slot="3623213486"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const bgSong = document.getElementById('bgSong');
const gameOverSong = document.getElementById('gameOverSong');
const restartBtn = document.getElementById('restartBtn');

// Images
const birdImg = new Image();
birdImg.src = 'https://i.ibb.co/Zj13FDV/bird.png';

const pillarImg = new Image();
pillarImg.src = 'https://i.ibb.co/PKtvTXQ/pillar.png';

let bird, gravity = 0.5, jump = -10;
let pillars = [];
let frame = 0;
let isGameOver = false;
let hasStarted = false;

// Jump on space, click or touch
function startJump() {
    if (!bird) return;
    bird.dy = jump;

    if (!hasStarted) {
        hasStarted = true;
        startGame();
    }
}

document.addEventListener('keydown', e => { if(e.code==='Space') startJump(); });
document.addEventListener('mousedown', startJump);
document.addEventListener('touchstart', startJump);

// Start Game
function startGame() {
    isGameOver = false;
    restartBtn.style.display = 'none';

    bird = { x: 100, y: 300, width: 50, height: 50, dy: 0 };
    pillars = [];
    frame = 0;

    gameOverSong.pause();
    gameOverSong.currentTime = 0;

    bgSong.currentTime = 0;
    bgSong.play().catch(err => console.log("Autoplay blocked"));

    gameLoop();
}

// Game Over
function endGame() {
    if (isGameOver) return;

    isGameOver = true;
    bgSong.pause();
    gameOverSong.currentTime = 0;
    gameOverSong.play();

    restartBtn.style.display = 'block';
}

// Restart Button
restartBtn.addEventListener('click', () => {
    hasStarted = true;
    startGame();
});

// Create Pillars
function createPillars() {
    let gap = 150;
    let topHeight = Math.floor(Math.random() * 250) + 50;
    let bottomHeight = canvas.height - topHeight - gap;

    pillars.push({
        x: canvas.width,
        topY: 0,
        topHeight: topHeight,
        bottomY: topHeight + gap,
        bottomHeight: bottomHeight,
        width: 80
    });
}

// Collision Check
function checkCollision(b, p) {
    return (
        b.x < p.x + p.width &&
        b.x + b.width > p.x &&
        (b.y < p.topY + p.topHeight || b.y + b.height > p.bottomY)
    );
}

// Game Loop
function gameLoop() {
    if (isGameOver) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    bird.dy += gravity;
    bird.y += bird.dy;
    ctx.drawImage(birdImg, bird.x, bird.y, bird.width, bird.height);

    if (frame % 100 === 0) createPillars();

    for (let p of pillars) {
        p.x -= 3;
        ctx.drawImage(pillarImg, p.x, p.topY, p.width, p.topHeight);
        ctx.drawImage(pillarImg, p.x, p.bottomY, p.width, p.bottomHeight);

        if (checkCollision(bird, p)) endGame();
    }

    pillars = pillars.filter(p => p.x + p.width > 0);

    if (bird.y + bird.height > canvas.height || bird.y < 0) endGame();

    frame++;
    requestAnimationFrame(gameLoop);
}
</script>

</body>
</html>
